@if (loading) {
  <app-throbber></app-throbber>
    } @else {
  <div class="fields-wrapper" [formGroup]="form">
    <!-- Шаг 0: Выбор кота и контакты -->
  <div class="field-wrapper" [hidden]="active !== 0" formGroupName="0">
    <div class="field">
    <div>
    <p class="label">Выберите кота</p>
    @if (getControl(0, 'cat').errors?.['required'] && getControl(0, 'cat').touched) {
  <p class="error">Поле обязательно для заполнения</p>
  }
  </div>
  <select formControlName="cat">
  @for (option of optionsCat; track $index) {
  <!-- Исправлено: используем метод stringify -->
  <option [value]="stringify(option)">{{option.text}}</option>
  }
  </select>
  </div>

  <div class="field">
  <div>
  <p class="label">Имя владельца</p>
  @if (getControl(0, 'ownerName').errors?.['required'] && getControl(0, 'ownerName').touched) {
<p class="error">Поле обязательно для заполнения</p>
}
</div>
<input formControlName="ownerName" placeholder="Ваше имя">
</div>

<!-- Добавьте поля telephone и email аналогично vet -->
<div class="field">
<div>
<p class="label">Телефон для связи</p>
@if (getControl(0, 'telephone').errors && getControl(0, 'telephone').touched) {
@if (getControl(0, 'telephone').errors?.['required']) {
  <p class="error">Поле обязательно для заполнения</p>
    }
    @if (getControl(0, 'telephone').errors?.['pattern']) {
  <p class="error">Введите 11 цифр</p>
    }
    }
    </div>
  <input formControlName="telephone" placeholder="12345678901">
    </div>

    <div class="field">
    <div>
    <p class="label">Email для связи</p>
    @if (getControl(0, 'email').errors?.['email'] && getControl(0, 'email').touched) {
  <p class="error">Некорректный email</p>
  }
  </div>
  <input formControlName="email" type="email" placeholder="abc@dfg.ru">
  </div>
  </div>

  <!-- Шаг 1: Адрес доставки -->
  <div class="field-wrapper" [hidden]="active !== 1" formGroupName="1">
  <!-- ... (остается без изменений) ... -->
  </div>

  <!-- Шаг 2: Детали заказа -->
  <div class="field-wrapper" [hidden]="active !== 2" formGroupName="2">
  <!-- ... (остается без изменений) ... -->
  </div>

  <!-- Шаг 3: Комментарий -->
  <div class="field-wrapper" [hidden]="active !== 3" formGroupName="3">
  <!-- ... (остается без изменений) ... -->
  </div>

  <!-- Шаг 4: Проверка данных -->
  @if (active === 4) {
  <app-check-info [data]="getResult"></app-check-info>
  }
  </div>

  <div class="button-container">
  <!-- Исправлено: используем метод prevStep -->
  <button class="button" [hidden]="active === 0" (click)="prevStep()">Назад</button>

  @if (active === 4) {
  <button class="button" (click)="submitOrder()">Подтвердить заказ</button>
  } @else {
  <!-- Исправлено: используем метод nextStep -->
  <button class="button" (click)="nextStep()">Далее</button>
  }
  </div>
  }
