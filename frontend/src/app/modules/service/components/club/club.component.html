@if (loading) {
<app-throbber></app-throbber>
} @else if (notEnoughCats) {
<div class="not-have-cat col-2 col-lg-12">
  <img src="../../../assets/png/cats/sad.png" class="image">
  <h3>Упс...<br>У вас недостаточно зарегистрированных котиков для использования услуги</h3>
  <p class="text">
    Перейдите к <a [routerLink]="'/add-cat'">добавлению котика</a> или выберите <a [routerLink]="'/'">другую услугу</a>
  </p>
</div>
} @else if (notEnoughClubs) {
<div class="not-have-cat col-2 col-lg-12">
  <img src="../../../assets/png/cats/sad.png" class="image">
  <h3>Упс...<br>К сожалению, нет доступных клубов для вступления</h3>
  <p class="text">
    Выберите <a [routerLink]="'/'">другую услугу</a>
  </p>
</div>
} @else {
<div class="fields-wrapper" [formGroup]="form">
  <div class="field-wrapper" [hidden]="active !== 0" formGroupName="0">
    <div class="field">
      <div>
        <p class="label">Выберите котика/кошку</p>
      </div>
    </div>
    <div class="field">
      <div>
        <p class="label">Выберите кота</p>
        @if (getControl(0, 'cat').errors?.['required'] && getControl(0, 'cat').touched) {
        <p class="error">Поле обязательно для заполнения</p>
        }
      </div>
      <select formControlName="cat" (invalid)="getControl(0, 'cat').invalid">
        @for (option of optionsCatF; track $index) {
        <option [value]="getItem('cat', $index)">{{option.text}}</option>
        }
      </select>
    </div>
    <div class="field">
      <div>
        <p class="label">Серия и номер паспорта</p>
        @if (getControl(0, 'passport').errors && getControl(0, 'passport').touched) {
        @if (getControl(0, 'passport').errors?.['required']) {
        <p class="error">Поле обязательно для заполнения</p>
        }
        @if (getControl(0, 'passport').errors?.['pattern']) {
        <p class="error">Введите значение в виде «0000 000000»</p>
        }
        }
      </div>
      <input formControlName="passport" placeholder="0000 000000" (invalid)="getControl(0, 'passport').invalid">
    </div>
    <div>
      <p class="label">Информация о владельце</p>
    </div>
    <div class="field">
      <div>
        <p class="label">ФИО</p>
        @if (getControl(0, 'ownerName').errors && getControl(0, 'ownerName').touched) {
        @if (getControl(0, 'ownerName').errors?.['required']) {
        <p class="error">Поле обязательно для заполнения</p>
        }
        }
      </div>
      <input formControlName="ownerName" placeholder="Иванов Иван Иванович"
             (invalid)="getControl(0, 'ownerName').invalid">
    </div>
    <div class="field">
      <div>
        <p class="label">Телефон</p>
        @if (getControl(0, 'phone').errors && getControl(0, 'phone').touched) {
        @if (getControl(0, 'phone').errors?.['required']) {
        <p class="error">Поле обязательно для заполнения</p>
        }
        @if (getControl(0, 'phone').errors?.['pattern']) {
        <p class="error">Введите значение в виде «81234567890»</p>
        }
        }
      </div>
      <input formControlName="phone" placeholder="89999999999" (invalid)="getControl(0, 'phone').invalid">
    </div>
    <div class="field">
      <div>
        <p class="label">Email</p>
        @if (getControl(0, 'email').errors && getControl(0, 'email').touched) {
        @if (getControl(0, 'email').errors?.['required']) {
        <p class="error">Поле обязательно для заполнения</p>
        }
        @if (getControl(0, 'email').errors?.['pattern']) {
        <p class="error">Введите значение в виде «somemail&#64;example.ru»</p>
        }
        }
      </div>
      <input formControlName="email" placeholder="somemail@example.ru" (invalid)="getControl(0, 'email').invalid">
    </div>
    <div class="field">
      <div>
        <p class="label">Название питомника</p>
        @if (getControl(0, 'kennelName').errors && getControl(0, 'kennelName').touched) {
        @if (getControl(0, 'kennelName').errors?.['required']) {
        <p class="error">Поле обязательно для заполнения</p>
        }
        }
      </div>
      <input formControlName="kennelName" placeholder="Лучики" (invalid)="getControl(0, 'kennelName').invalid">
    </div>
    <div class="field">
      <div>
        <p class="label">Статус</p>
        @if (getControl(0, 'status').errors && getControl(0, 'status').touched) {
        @if (getControl(0, 'status').errors?.['required']) {
        <p class="error">Поле обязательно для заполнения</p>
        }
        }
      </div>
      <select formControlName="status" (invalid)="getControl(0, 'status').invalid">
        @for (status of ownerStatuses; track $index) {
        <option>{{status}}</option>
        }
      </select>
    </div>
  </div>
  <div class="field-wrapper" [hidden]="active !== 1" formGroupName="1">
    <div class="field">
      <div>
        <p class="label">Выбор клуба</p>
      </div>
    </div>
    <div class="field">
      <div>
        <p class="label">Выберите клуб</p>
        @if (getControl(1, 'club').errors?.['required'] && getControl(1, 'club').touched) {
        <p class="error">Поле обязательно для заполнения</p>
        }
      </div>
      <select formControlName="club" (invalid)="getControl(1, 'club').invalid">
        @for (club of clubs; track $index) {
        <option [value]="getClub($index)">{{club.text}}</option>
        }
      </select>

      <div class="club-info">
        <div class="club-image">
          <img
            src="https://welcome.mosreg.ru/uploads/%D0%B7%D0%B0%D0%B3%D0%BE%D1%80%D0%BE%D0%B4%D0%BD%D1%8B%D0%B5%20%D0%BA%D0%BB%D1%83%D0%B1%D1%8B/%D0%B7%D0%B0%D0%B2%D0%B8%D0%B4%D0%BD%D0%BE%D0%B5.jpg"
            alt="Club Image" style="width: 100px; height: 100px; border-radius: 50%;">
        </div>
        <div class="club-details">
          <h2>Клуб милых пушистиков</h2>
          <p>Присоединяйтесь к нашему клубу "Милых пушистиков" и погрузитесь в мир ласковых и обожаемых домашних котиков
            и кошечек. Мы собираемся регулярно для обмена впечатлениями, ухода за питомцами и обсуждения всего, что
            касается наших милых пушистиков.
            В нашем клубе вы найдете поддержку, новых друзей и массу полезной информации о заботе о ваших любимцах.</p>
        </div>
      </div>
    </div>
  </div>
</div>
@if (active === 2) {
<app-check-info [data]="getResult"></app-check-info>
}

}
