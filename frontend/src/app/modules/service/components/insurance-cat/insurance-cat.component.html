@if (loading) {
<app-throbber></app-throbber>
} @else {


<div class="fields-wrapper" [formGroup]="form">
  <div class="field-wrapper" [hidden]="active !== 0" formGroupName="0">
    <div class="field">
      <div>
        <p class="label">Выберите кота</p>
        @if (getControl(0, 'cat').errors?.['required'] && getControl(0, 'cat').touched) {
        <p class="error">Поле обязательно для заполнения</p>
        }
      </div>
      <select formControlName="cat" (invalid)="getControl(0, 'cat').invalid">
        @for (option of optionsCat; track $index) {
        <option [value]="getItem('cat', $index)">{{option.text}}</option>
        }
      </select>
    </div>
    <div class="field">
      <div>
        <p class="label">Телефон для связи</p>
        @if (getControl(0, 'telephone').errors && getControl(0, 'telephone').touched) {
        @if (getControl(0, 'telephone').errors?.['required']) {
        <p class="error">Поле обязательно для заполнения</p>
        }
        @if (getControl(0, 'telephone').errors?.['pattern']) {
        <p class="error">Введите 11 цифр</p>
        }
        }
      </div>
      <input formControlName="telephone" placeholder="88005355555"
             (invalid)="getControl(0, 'telephone').invalid">
    </div>
    <div class="field">
      <div>
        <p class="label">Email для связи</p>
        @if (getControl(0, 'email').errors?.['pattern'] && getControl(0, 'email').touched) {
        <p class="error">Введите 11 цифр</p>
        }
      </div>
      <input formControlName="email" type="email" placeholder="abc@dfg.ru"
             (invalid)="getControl(0, 'email').invalid">
    </div>
  </div>




  <div class="field-wrapper" [hidden]="active !== 1" formGroupName="1">
    <div class="field">
      <div>
        <p class="label">Страховая компания</p>
        @if (getControl(1, 'company')?.errors?.['required'] && getControl(1, 'company')?.touched) {
        <p class="error">Поле обязательно для заполнения</p>
        }
      </div>
      <select formControlName="company" (invalid)="getControl(1, 'company').invalid">
        @for (com of CompaniesOptions; track $index) {
        <option [value]="getItem('com', $index)">{{com.text}}</option>
        }
      </select>
    </div>

    <div class="field">
      <div>
        <p class="label">Категория страхования</p>
        @if (getControl(1, 'category')?.errors?.['required'] && getControl(1, 'category')?.touched) {
        <p class="error">Поле обязательно для заполнения</p>
        }
      </div>
      <select formControlName="category" (invalid)="getControl(1, 'category').invalid">
        @for (categ of CategoriesOptions; track $index) {
        <option [value]="getItem('categ', $index)">{{categ.text}}</option>
        }
      </select>
    </div>

    <div class="field">
      <div>
        <p class="label">Дата начала страховки</p>
        @if (getControl(1, 'date').errors && getControl(1, 'date').touched) {
        @if (getControl(1, 'date').errors?.['required']) {
        <p class="error">Поле обязательно для заполнения</p>
        }
        @if (getControl(1, 'date').errors?.['minDate']) {
        <p class="error">Выберите дату в будущем</p>
        }
        }
      </div>
      <input formControlName="date" type="date" (invalid)="getControl(1, 'date').invalid">
    </div>


  </div>






  @if (active === 2) {
  <app-check-info [data]="getResult"></app-check-info>
  }
</div>
}
