<!-- hotel.component.html -->

<div *ngIf="loading">
  <app-throbber></app-throbber>
</div>

<div *ngIf="!loading && notEnoughCats">
  <div class="not-have-cat col-2 col-lg-12">
    <img src="../../../assets/png/cats/sad.png" class="image" alt="Нет котиков">
    <h3>Упс...<br>У вас недостаточно зарегистрированных котиков для использования услуги</h3>
    <p class="text">
      Перейдите к <a routerLink="/add-cat">добавлению котика</a> или выберите <a routerLink="/">другую услугу</a>
    </p>
  </div>
</div>

<div *ngIf="!loading && !notEnoughCats" [formGroup]="form">
  <!-- Шаг 0: выбор котика и отеля -->
  <div *ngIf="active === 0" formGroupName="0" class="fields-wrapper">
    <div class="field">
      <label for="cat">Выберите котика</label>
      <select id="cat" formControlName="cat">
        <option *ngFor="let c of cats" [value]="c.id">{{ c.name }}</option>
      </select>
      <div *ngIf="getControl(0, 'cat').invalid && getControl(0, 'cat').touched" class="error">
        Поле обязательно
      </div>
    </div>

    <div class="field">
      <label for="hotel">Выберите отель</label>
      <select id="hotel" formControlName="hotel">
        <option *ngFor="let h of hotels" [value]="h.id">{{ h.name }}</option>
      </select>
      <div *ngIf="getControl(0, 'hotel').invalid && getControl(0, 'hotel').touched" class="error">
        Поле обязательно
      </div>
    </div>
  </div>

  <div *ngIf="active === 1" formGroupName="1" class="fields-wrapper">
    <div class="field">
      <label for="startDate">Дата начала передержки</label>
      <input id="startDate" type="date" formControlName="startDate" />
      <div *ngIf="getControl(1, 'startDate').invalid && getControl(1, 'startDate').touched" class="error">
        Укажите корректную дату начала
      </div>
    </div>

    <div class="field">
      <label for="endDate">Дата окончания передержки</label>
      <input id="endDate" type="date" formControlName="endDate" />
      <div *ngIf="getControl(1, 'endDate').invalid && getControl(1, 'endDate').touched" class="error">
        Укажите корректную дату окончания
      </div>
    </div>
  </div>

  <div *ngIf="active === 2" class="fields-wrapper">
    <app-check-info [data]="getResult"></app-check-info>
  </div>


</div>
